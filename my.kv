#:import hex kivy.utils.get_color_from_hex

WindowManager:
    canvas.before:
        Color:
            rgba: hex('#fffbe6')
        Rectangle:
            pos: self.pos
            size: self.size
    HomeScreen:
    DifficultySelection:
    BookmarkDifficulty:
    BookmarkedItems:
    SettingsScreen:
    ContentsDiff:
    Contents:
    GrammarItem:
    VocabItem:
    KanjiItem:
    EndQuizz:


<HomeScreen>:
    name: "home"

    GridLayout:
        cols: 2

        Button:
            text: "Quiz"
            on_release:
                app.root.current = "diff"
                root.manager.transition.direction = "left"

        Button:
            text: "Settings"
            on_release:
                app.root.current = "settings"
                root.manager.transition.direction = "left"

        Button:
            text: "Courses"
            on_release:
                app.root.current = "contents_diff"
                root.manager.transition.direction = "left"

        Button:
            text: "Bookmarks"
            on_release:
                app.root.current = "bookd"
                root.manager.transition.direction = "left"


<DifficultySelection>:
    name: "diff"

    GridLayout:
        cols: 2

        Button:
            text: "N5"
            on_release:
                root.start5()
                root.manager.transition.direction = "left"

        Button:
            text: "N4"
            on_release:
                root.start1()
                root.manager.transition.direction = "left"

        Button:
            text: "N3"
            on_release:
                root.start1()
                root.manager.transition.direction = "left"

        Button:
            text: "N2"
            on_release:
                root.start1()
                root.manager.transition.direction = "left"

        Button:
            text: "N1"
            on_release:
                root.start1()
                root.manager.transition.direction = "left"

        Button:
            text: "Back"
            on_release:
                app.root.current = "home"
                root.manager.transition.direction = "right"


<BookmarkDifficulty>:
    name: "bookd"

    GridLayout:
        cols: 1

        Button:
            text: "N5"
            on_release:
                app.root.current = "booki"
                root.manager.transition.direction = "left"

        Button:
            text: "N4"
            on_release:
                root.notice()
                root.manager.transition.direction = "left"

        Button:
            text: "N3"
            on_release:
                root.notice()
                root.manager.transition.direction = "left"

        Button:
            text: "N2"
            on_release:
                root.notice()
                root.manager.transition.direction = "left"

        Button:
            text: "N1"
            on_release:
                root.notice()
                root.manager.transition.direction = "left"

        Button:
            text: "Back"
            on_release:
                app.root.current = "home"
                root.manager.transition.direction = "right"


<BookmarkedItems>:
    name: "booki"

    GridLayout:
        cols: 1
        row_force_default: False

        Label:
            size_hint_y: None
            height: root.height / 10
            text: root.level

        TabbedPanel:
            do_default_tab: False
            tab_width: self.parent.width / 3

            TabbedPanelItem:
                text: "grammar"

                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    size: self.size

                    GridLayout:
                        id: grammar_tab
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        row_default_height: root.height/8

            TabbedPanelItem:
                text: "vocab"

                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    size: self.size

                    GridLayout:
                        id: vocab_tab
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        row_default_height: root.height/8

            TabbedPanelItem:
                text: "kanji"

                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    size: self.size

                    GridLayout:
                        id: kanji_tab
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        row_default_height: root.height/8

        Button:
            size_hint_y: None
            height: root.height / 10
            text: "back"
            on_release:
                app.root.current = "bookd"
                root.manager.transition.direction = "right"



<SettingsScreen>:
    name: "settings"

    GridLayout:
        cols: 1

        Button:
            text: "Currently Empty. Tap to go back."
            on_release:
                app.root.current = "home"
                root.manager.transition.direction = "right"



<ContentsDiff>:
    name: "contents_diff"

    GridLayout:
        cols: 1

        Button:
            text: "N5"
            on_release:
                root.next_screen()
                root.manager.transition.direction = "left"

        Button:
            text: "N4"
            on_release:
                root.notice()
                root.manager.transition.direction = "left"

        Button:
            text: "N3"
            on_release:
                root.notice()
                root.manager.transition.direction = "left"

        Button:
            text: "N2"
            on_release:
                root.notice()
                root.manager.transition.direction = "left"

        Button:
            text: "N1"
            on_release:
                root.notice()
                root.manager.transition.direction = "left"

        Button:
            text: "Back"
            on_release:
                app.root.current = "home"
                root.manager.transition.direction = "right"



<Contents>:
    name: "contents"

    GridLayout:
        cols: 1
        row_force_default: False

        Label:
            size_hint_y: None
            height: root.height / 10
            text: root.level

        TabbedPanel:
            do_default_tab: False
            tab_width: self.parent.width / 3

            TabbedPanelItem:
                text: "grammar"

                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    size: self.size

                    GridLayout:
                        id: grammar_tab
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        row_default_height: root.height/8

            TabbedPanelItem:
                text: "vocab"

                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    size: self.size

                    GridLayout:
                        id: vocab_tab
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        row_default_height: root.height/8

            TabbedPanelItem:
                text: "kanji"

                ScrollView:
                    do_scroll_x: False
                    do_scroll_y: True
                    size: self.size

                    GridLayout:
                        id: kanji_tab
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        row_default_height: root.height/8

        Button:
            size_hint_y: None
            height: root.height / 10
            text: "back"
            on_release:
                app.root.current = "contents_diff"
                root.manager.transition.direction = "right"

<GrammarItem>:
    name:"grammari"

    GridLayout:
        cols: 1

        Label:
            bold: "True"
            size_hint_y: None
            height: root.height/13
            text: root.label
            font_name: "ComicSans"
            canvas.before:
                Color:
                    rgba: hex('#356859')
                Rectangle:
                    pos: self.pos
                    size: self.size

        AnchorLayout:
            size_hint_y: None
            height: (root.height/6)*2
            Image:
                anchor: "center"
                size_hint_x: .6
                allow_stretch: True
                source: root.border

            Label:
                anchor_x: "center"
                size_hint: .4, 1
                text_size: (self.width/10)*9, None
                font_name: "komorebi"
                text: root.question
                color: 0, 0, 0, 1

        GridLayout:
            cols: 1

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.A
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_a()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.B
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_b()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.C
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_c()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.D
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_d()
                        root.manager.transition.direction = "left"

        GridLayout:
            cols: 1
            size_hint_y: None
            height: root.height/15


<VocabItem>:
    name: "vocabi"

    GridLayout:
        cols: 1

        Label:
            bold: "True"
            size_hint_y: None
            height: root.height/13
            text: root.label
            font_name: "ComicSans"
            canvas.before:
                Color:
                    rgba: hex('#356859')
                Rectangle:
                    pos: self.pos
                    size: self.size

        AnchorLayout:
            size_hint_y: None
            height: (root.height/6)*2
            Image:
                anchor: "center"
                size_hint_x: .6
                allow_stretch: True
                source: root.border

            GridLayout:
                anchor: "center"
                cols: 1
                size_hint: None, None
                height: root.height/10
                width: root.width/2

                Label:
                    font_name: "ComicSans"
                    text: root.en
                    color: 0, 0, 0, 1

                Label:
                    font_name: "komorebi"
                    text: root.kanji
                    color: 0, 0, 0, 1

        GridLayout:
            cols: 1

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.A
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_a()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.B
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_b()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.C
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_c()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.D
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_d()
                        root.manager.transition.direction = "left"

        GridLayout:
            cols: 1
            size_hint_y: None
            height: root.height/15



<KanjiItem>:
    name: "kanjii"

    GridLayout:
        cols: 1

        Label:
            bold: "True"
            size_hint_y: None
            height: root.height/13
            text: root.label
            font_name: "ComicSans"
            canvas.before:
                Color:
                    rgba: hex('#356859')
                Rectangle:
                    pos: self.pos
                    size: self.size

        AnchorLayout:
            size_hint_y: None
            height: (root.height/6)
            Image:
                anchor: "center"
                size_hint_x: .8
                size_hint_y: .9
                allow_stretch: True
                source: root.border

            Label:
                size_hint: .6, 1
                text_size: (self.width/10)*9, None
                font_name: "komorebi"
                text: root.sentence
                color: 0, 0, 0, 1

        AnchorLayout:
            size_hint_y: None
            height: (root.height/6)
            Image:
                anchor: "center"
                size_hint_x: .4
                size_hint_y: .4
                allow_stretch: True
                source: root.border



            Label:
                font_name: "komorebi"
                text: root.kanji
                color: 0, 0, 0, 1

        GridLayout:
            cols: 1

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.A
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_a()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.B
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_b()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.C
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_c()
                        root.manager.transition.direction = "left"

            AnchorLayout:
                Button:
                    anchor: "center"
                    size_hint: .8, .6
                    font_name: "komorebi"
                    text: root.D
                    color: 0, 0, 0, 1
                    background_normal: root.button_up
                    background_down: root.button_down
                    allow_stretch: "False"
                    border: 0,0,0,0
                    on_release:
                        root.ent_d()
                        root.manager.transition.direction = "left"

        GridLayout:
            cols: 1
            size_hint_y: None
            height: root.height/15


<EndQuizz>:
    name: "end"

    GridLayout:
        cols: 1

        Label:
            text: root.score

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            size: self.size

            GridLayout:
                id: review_buttons
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                row_default_height: root.height/8

        Button:
            text: "Back"
            on_release:
                app.root.current = "diff"
                root.manager.transition.direction = "right"



<GrammarPop>:
    title: 'Grammar'
    size_hint: (None, None)
    size: (400, 400)
    GridLayout:
        cols: 1

        GridLayout:
            cols: 1

            Label:
                font_name: "komorebi"
                text: root.item

            Label:
                font_name: "komorebi"
                text: root.meaning

        Label:
            font_name: "komorebi"
            text: root.jp

        Label:
            font_name: "komorebi"
            text: root.en

        GridLayout:
            cols: 2

            Button:
                text: root.status
                on_release:
                    root.bookmark()

            Button:
                text: "Close"
                on_release:
                    root.dismiss()



<VocabPop>:
    title: 'Vocab'
    size_hint: (None, None)
    size: (400, 400)
    GridLayout:
        cols: 1

        GridLayout:
            cols: 2

            GridLayout:
                cols: 1

                Label:
                    font_name: "komorebi"
                    text: root.jp_word

                Label:
                    font_name: "komorebi"
                    text: root.reading

            Label:
                font_name: "komorebi"
                text: root.en_word

        Label:
            font_name: "komorebi"
            text: root.jp_sent

        Label:
            font_name: "komorebi"
            text: root.en_sent

        GridLayout:
            cols: 2

            Button:
                text: root.status
                on_release:
                    root.bookmark()

            Button:
                text: "Close"
                on_release:
                    root.dismiss()


<KanjiPop>:
    title: 'Kanji'
    size_hint: (None, None)
    size: (400, 400)
    GridLayout:
        cols: 1

        GridLayout:
            cols: 2

            Label:
                font_name: "komorebi"
                text: root.jp_word

            Label:
                font_name: "komorebi"
                text: root.translation

        Label:
            font_name: "komorebi"
            text: root.jp_sent

        Label:
            font_name: "komorebi"
            text: root.en_sent

        GridLayout:
            cols: 2

            Button:
                text: root.status
                on_release:
                    root.bookmark()

            Button:
                text: "Close"
                on_release:
                    root.dismiss()


<NoticePop>:
    title: "ERROR"
    size_hint: (None, None)
    size: (400, 400)

    Label:
        font_name: "komorebi"
        text: "this part has not been coded yet \ntap outside the popup to continue"
